[opcache]
; ===========================================
; OPcache Configuration for Production
; Bitrix Docker Environment
; ===========================================

; Enable OPcache
opcache.enable                      = 1
opcache.enable_cli                  = 1

; Validation - check every 2 seconds (Bitrix modifies files dynamically)
opcache.validate_timestamps         = 1
opcache.revalidate_freq             = 2

; Memory settings (optimized for large Bitrix installations)
opcache.memory_consumption          = 512
opcache.interned_strings_buffer     = 64
opcache.max_accelerated_files       = 100000

; Performance optimizations
opcache.fast_shutdown               = 1
opcache.max_wasted_percentage       = 5

; Error logging
opcache.error_log                   = "/var/log/php/opcache.log"
opcache.log_verbosity_level         = 1

; JIT compilation (PHP 8.0+)
opcache.jit_buffer_size             = 128M
opcache.jit                         = tracing
